{% extends 'base.html' %}
{% from 'bootstrap5/form.html' import render_form %}

{% block title %}Edit Profile{% endblock %}
{% block content %}
<header class="header bg-dark text-white">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCu4LpF63EcRKbH60CU1ij85xH23NGAkno&libraries=places" async defer></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <div class="container">
    <div class="d-flex align-items-center justify-content-between py-0.5">
      <!-- The Function -->
      <a class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark" href="{{ url_for('commfeed') }}">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" width="256" height="64" viewBox="0 0 2000 282"><g transform="matrix(1,0,0,1,-1.2121212121212466,-1.0877727555462684)"><svg viewBox="0 0 396 56" data-background-color="#191f3f" preserveAspectRatio="xMidYMid meet" height="282" width="2000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="tight-bounds" transform="matrix(1,0,0,1,0.2400000000000091,0.21601161103046707)"><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g id="textblocktransform"><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52" id="textblock"><g><svg viewBox="0 0 395.52 55.56797677793905" height="55.56797677793905" width="395.52"><g transform="matrix(1,0,0,1,0,0)"><svg width="395.52" viewBox="1 -39.15 344.47 48.4" height="55.56797677793905" data-palette-color="#f00b51"><path d="M1-34.65L29.7-34.65 29.7-28 19.25-28 19.25 0 11.45 0 11.45-28 1-28 1-34.65ZM41.65 0L34.2 0 34.2-37.6 41.65-38.8 41.65-26.2Q42.4-26.45 43.57-26.68 44.75-26.9 45.85-26.9L45.85-26.9Q49.05-26.9 51.17-26.03 53.3-25.15 54.57-23.55 55.85-21.95 56.37-19.75 56.9-17.55 56.9-14.85L56.9-14.85 56.9 0 49.45 0 49.45-13.95Q49.45-17.55 48.52-19.05 47.6-20.55 45.1-20.55L45.1-20.55Q44.1-20.55 43.22-20.38 42.35-20.2 41.65-20L41.65-20 41.65 0ZM62.4-12.95L62.4-12.95Q62.4-16.45 63.47-19.07 64.55-21.7 66.3-23.45 68.05-25.2 70.32-26.1 72.6-27 75-27L75-27Q80.6-27 83.85-23.58 87.1-20.15 87.1-13.5L87.1-13.5Q87.1-12.85 87.05-12.08 87-11.3 86.95-10.7L86.95-10.7 70.05-10.7Q70.3-8.4 72.2-7.05 74.1-5.7 77.3-5.7L77.3-5.7Q79.35-5.7 81.32-6.08 83.3-6.45 84.55-7L84.55-7 85.55-0.95Q84.95-0.65 83.95-0.35 82.95-0.05 81.72 0.18 80.5 0.4 79.1 0.55 77.7 0.7 76.3 0.7L76.3 0.7Q72.75 0.7 70.12-0.35 67.5-1.4 65.77-3.23 64.05-5.05 63.22-7.55 62.4-10.05 62.4-12.95ZM70.05-15.8L79.9-15.8Q79.85-16.75 79.57-17.65 79.3-18.55 78.72-19.25 78.15-19.95 77.27-20.4 76.4-20.85 75.1-20.85L75.1-20.85Q73.85-20.85 72.95-20.43 72.05-20 71.45-19.3 70.85-18.6 70.52-17.68 70.2-16.75 70.05-15.8L70.05-15.8ZM113.14 0L105.34 0 105.34-34.65 128.54-34.65 128.54-28.1 113.14-28.1 113.14-20.85 126.84-20.85 126.84-14.3 113.14-14.3 113.14 0ZM154.99-26.3L154.99-0.9Q153.09-0.35 150.09 0.13 147.09 0.6 143.79 0.6L143.79 0.6Q140.44 0.6 138.21-0.3 135.99-1.2 134.69-2.83 133.39-4.45 132.84-6.7 132.29-8.95 132.29-11.65L132.29-11.65 132.29-26.3 139.74-26.3 139.74-12.55Q139.74-8.95 140.69-7.35 141.64-5.75 144.24-5.75L144.24-5.75Q145.04-5.75 145.94-5.83 146.84-5.9 147.54-6L147.54-6 147.54-26.3 154.99-26.3ZM161.99 0L161.99-25.4Q163.89-25.95 166.89-26.43 169.89-26.9 173.19-26.9L173.19-26.9Q176.54-26.9 178.76-26.03 180.99-25.15 182.29-23.55 183.59-21.95 184.14-19.75 184.69-17.55 184.69-14.85L184.69-14.85 184.69 0 177.24 0 177.24-13.95Q177.24-17.55 176.29-19.05 175.34-20.55 172.74-20.55L172.74-20.55Q171.94-20.55 171.04-20.48 170.14-20.4 169.44-20.3L169.44-20.3 169.44 0 161.99 0ZM190.18-13.15L190.18-13.15Q190.18-16 191.11-18.53 192.03-21.05 193.78-22.93 195.53-24.8 198.03-25.9 200.53-27 203.73-27L203.73-27Q205.83-27 207.58-26.63 209.33-26.25 210.98-25.55L210.98-25.55 209.43-19.6Q208.38-20 207.13-20.3 205.88-20.6 204.33-20.6L204.33-20.6Q201.03-20.6 199.41-18.55 197.78-16.5 197.78-13.15L197.78-13.15Q197.78-9.6 199.31-7.65 200.83-5.7 204.63-5.7L204.63-5.7Q205.98-5.7 207.53-5.95 209.08-6.2 210.38-6.75L210.38-6.75 211.43-0.65Q210.13-0.1 208.18 0.3 206.23 0.7 203.88 0.7L203.88 0.7Q200.28 0.7 197.68-0.38 195.08-1.45 193.41-3.3 191.73-5.15 190.96-7.68 190.18-10.2 190.18-13.15ZM216.18-10.75L216.18-32.85 223.63-34.05 223.63-26.3 232.58-26.3 232.58-20.1 223.63-20.1 223.63-10.85Q223.63-8.5 224.46-7.1 225.28-5.7 227.78-5.7L227.78-5.7Q228.98-5.7 230.25-5.93 231.53-6.15 232.58-6.55L232.58-6.55 233.63-0.75Q232.28-0.2 230.63 0.2 228.98 0.6 226.58 0.6L226.58 0.6Q223.53 0.6 221.53-0.23 219.53-1.05 218.33-2.53 217.13-4 216.66-6.1 216.18-8.2 216.18-10.75L216.18-10.75ZM246.08-26.3L246.08 0 238.63 0 238.63-26.3 246.08-26.3ZM246.78-33.9L246.78-33.9Q246.78-31.85 245.45-30.68 244.13-29.5 242.33-29.5L242.33-29.5Q240.53-29.5 239.2-30.68 237.88-31.85 237.88-33.9L237.88-33.9Q237.88-35.95 239.2-37.13 240.53-38.3 242.33-38.3L242.33-38.3Q244.13-38.3 245.45-37.13 246.78-35.95 246.78-33.9ZM277.68-13.2L277.68-13.2Q277.68-10.1 276.77-7.53 275.88-4.95 274.18-3.13 272.47-1.3 270.1-0.3 267.72 0.7 264.77 0.7L264.77 0.7Q261.88 0.7 259.5-0.3 257.13-1.3 255.42-3.13 253.72-4.95 252.77-7.53 251.82-10.1 251.82-13.2L251.82-13.2Q251.82-16.3 252.8-18.85 253.77-21.4 255.5-23.2 257.22-25 259.6-26 261.97-27 264.77-27L264.77-27Q267.63-27 270-26 272.38-25 274.07-23.2 275.77-21.4 276.72-18.85 277.68-16.3 277.68-13.2ZM270.07-13.2L270.07-13.2Q270.07-16.65 268.7-18.63 267.32-20.6 264.77-20.6L264.77-20.6Q262.22-20.6 260.82-18.63 259.43-16.65 259.43-13.2L259.43-13.2Q259.43-9.75 260.82-7.73 262.22-5.7 264.77-5.7L264.77-5.7Q267.32-5.7 268.7-7.73 270.07-9.75 270.07-13.2ZM283.42 0L283.42-25.4Q285.32-25.95 288.32-26.43 291.32-26.9 294.62-26.9L294.62-26.9Q297.97-26.9 300.2-26.03 302.42-25.15 303.72-23.55 305.02-21.95 305.57-19.75 306.12-17.55 306.12-14.85L306.12-14.85 306.12 0 298.67 0 298.67-13.95Q298.67-17.55 297.72-19.05 296.77-20.55 294.17-20.55L294.17-20.55Q293.37-20.55 292.47-20.48 291.57-20.4 290.87-20.3L290.87-20.3 290.87 0 283.42 0ZM320.22-14.95L320.22-14.95Q320.22-9.05 322.07-3.7 323.92 1.65 326.92 5.9L326.92 5.9 321.72 9.25Q317.47 4.3 315.17-1.85 312.87-8 312.87-14.95L312.87-14.95Q312.87-21.9 315.17-28.05 317.47-34.2 321.72-39.15L321.72-39.15 326.92-35.8Q323.92-31.55 322.07-26.2 320.22-20.85 320.22-14.95ZM338.12-14.95L338.12-14.95Q338.12-20.85 336.27-26.2 334.42-31.55 331.42-35.8L331.42-35.8 336.62-39.15Q340.87-34.2 343.17-28.05 345.47-21.9 345.47-14.95L345.47-14.95Q345.47-8 343.17-1.85 340.87 4.3 336.62 9.25L336.62 9.25 331.42 5.9Q334.42 1.65 336.27-3.7 338.12-9.05 338.12-14.95Z" opacity="1" transform="matrix(1,0,0,1,0,0)" fill="#f00b51" class="wordmark-text-0" data-fill-palette-color="primary" id="text-0"></path></svg></g></svg></g></svg></g></svg></g></svg></g></svg></g></svg></g><defs></defs></svg><rect width="395.52" height="55.56797677793905" fill="none" stroke="none" visibility="hidden"></rect></g></svg></g></svg>
      </a>
      <!-- Everything Else-->
      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li class="nav-link px-2 text-secondary">
          <a class="nav-link text-light" href="{{ url_for('commfeed') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
              <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
            </svg>
          </a>
        </li>
        <li class="nav-link px-2 text-secondary">
          <a class="nav-link text-light" href="{{ url_for('explore_communities') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-compass" viewBox="0 0 16 16">
              <path d="M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016m6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"/>
              <path d="m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"/>
            </svg>
          </a>
        </li>
        <!-- <li class="nav-link px-2 text-secondary">
          <a class="nav-link text-light" href="{{ url_for('my_circles') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
            </svg>
          </a>
        </li> -->
        <li class="nav-link px-2 text-secondary">
          <div class="dropdown">
            <a class="nav-link text-light" id="notificationsDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"/>
              </svg>
            </a>
            <div class="dropdown-menu" aria-labelledby="notificationsDropdown">
              <!-- Add dynamic content for notifications here -->
              {% for notification in notifications %}
                <a class="dropdown-item" href="{{ url_for('show_post', post_id=notification.post_id) }}">
                  {{ notification.message }}
                </a>
              {% endfor %}
              {% if unread_notifications|length == 0 %}
                <span class="dropdown-item">No notifications</span>
              {% endif %}
            </div>
          </div>
        </li>
        <li class="nav-link px-2 text-secondary">
          <a class="nav-link text-light dropdown" href="{% if current_user.is_authenticated %}{{ url_for('show_profile', user_id=current_user.id) }}{% else %}{{ url_for('login') }}{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-file-person-fill" viewBox="0 0 16 16">
              <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2m-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11"/>
            </svg>
          </a>
        </li>
        <!-- Only show Create Post button if user is logged in -->
        {% if logged_in %}
        <li class="nav-link px-2 text-secondary">
          <a class="nav-link text-light" href="{{ url_for('post') }}" id="createpostbtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
              <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
            </svg>
          </a>
        </li>
        {% endif %}
        <!-- Hide the Login/Registration navigation for logged-in users -->
        {% if not logged_in %}
          <li class="nav-link px-2 text-secondary">
            <a class="nav-link text-light" href="{{ url_for('login') }}">Login</a>
          </li>
          <li class="nav-link px-2 text-secondary">
            <a class="nav-link text-light" href="{{ url_for('register') }}">Register</a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</header>



<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-8">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title fw-bold">What's Changed?</h2>
          {{ render_form(form, novalidate=True) }}
        </div>
      </div>
    </div>
  </div>
</div>



<script>
  if ( window.history.replaceState ) {
      window.history.replaceState( null, null, window.location.href );
  }
</script>

<!--Notis-->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var notificationsDropdown = new bootstrap.Dropdown(document.getElementById('notificationsDropdown'));
  });
</script>

<script>
  document.addEventListener("click", function (event) {
      const notificationsDropdown = document.getElementById("notificationsDropdown");
      const dropdownMenu = document.querySelector(".dropdown-menu");

      if (!notificationsDropdown.contains(event.target) && !dropdownMenu.contains(event.target)) {
          // Clicked outside the dropdown, close it
          dropdownMenu.classList.remove("show");
      }
  });
</script>

{% endblock %}